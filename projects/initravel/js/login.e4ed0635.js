(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0751":function(e,t,n){},2532:function(e,t,n){"use strict";var i=n("23e7"),a=n("5a34"),o=n("1d80"),s=n("ab13");i({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~String(o(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,n){var i=n("861d"),a=n("c6b6"),o=n("b622"),s=o("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==a(e))}},"5a34":function(e,t,n){var i=n("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},7286:function(e,t,n){"use strict";var i=n("0751"),a=n.n(i);a.a},a55b:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("login-comp")},a=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wrapper"},[i("img",{staticClass:"setting-icon",attrs:{src:n("2a59"),alt:"user-cog.svg"},on:{click:function(t){e.open_setting=!0}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.open_setting,expression:"open_setting"}],staticClass:"setting-wrap"},[i("div",{staticClass:"setting-box"},[e._m(0),i("input",{directives:[{name:"model",rawName:"v-model",value:e.setting_name,expression:"setting_name"}],attrs:{type:"text",placeholder:"New Display Name"},domProps:{value:e.setting_name},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},input:function(t){t.target.composing||(e.setting_name=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.setting_phone,expression:"setting_phone"}],attrs:{type:"tel",placeholder:"New Phone Number"},domProps:{value:e.setting_phone},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},input:function(t){t.target.composing||(e.setting_phone=t.target.value)}}}),i("div",[i("div",{staticClass:"setting-confirm",on:{click:function(t){return e.update_info()}}},[e._v("Confirm")]),i("div",{staticClass:"setting-cancel",on:{click:function(t){return e.close_setting()}}},[e._v("Cancel")])])])]),1===e.show_which?i("div",[i("img",{attrs:{src:n("cf05"),alt:"logo img"},on:{click:function(t){return e.setting()}}}),e._m(1),i("div",{staticClass:"title_minor"},[e._v(" New? "),i("a",{staticClass:"signup-link",on:{click:function(t){t.preventDefault(),e.show_which=2}}},[e._v("Sign Up Here")])]),i("br"),i("hr"),i("br"),i("div",{staticClass:"message"},[e._v(e._s(e.message))]),i("br"),i("div",{staticClass:"flex-wrapper-login"},[i("div",{staticClass:"input-field"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.username},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},input:[function(t){t.target.composing||(e.username=t.target.value)},function(t){return e.allow_submit()}]}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},input:[function(t){t.target.composing||(e.password=t.target.value)},function(t){return e.allow_submit()}]}}),i("div",{class:{"submit-disabled":e.toggle_disable,submit:!e.toggle_disable},on:{click:function(t){return e.login()}}},[e._v("LOG IN")])]),e._m(2),i("div",{staticClass:"alternate"},[i("div",{on:{click:function(t){return e.third_provider(t)}}},[e._v("Login with Google")]),i("div",{on:{click:function(t){return e.third_provider(t)}}},[e._v("Login with Facebook")]),i("div",{on:{click:function(t){return e.third_provider(t)}}},[e._v("Login with Twitter")])])]),i("div",{staticClass:"powered",attrs:{onclick:"window.open('https://firebase.google.com/')"}},[e._v("Integrated with Google Firebse")])]):2===e.show_which?i("signup-comp",{on:{"back-button":function(t){e.show_which=1},"logged-in":function(t){return e.loggedin_func(t)}}}):3===e.show_which?i("div",{staticClass:"profile"},[i("router-link",{staticClass:"backb",attrs:{to:{name:"Home"}}},[e._v("↶ Back to Home")]),i("h1",[e._v(e._s(e.display_name||e.user_email))]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.change_img,expression:"change_img"}],staticClass:"upload-img-wrap"},[i("div",{staticClass:"upload-img"},[i("div",{staticClass:"close-upload-img-wrap",on:{click:function(t){return e.close_img()}}},[e._v("x")]),i("div",{staticClass:"upload-img-title"},[e._v("Upload New Image (200 x 200)")]),i("div",{staticClass:"progress-bar"},[i("div",{staticClass:"filler-text"},[e._v(e._s(e.progress_fill+"%"))]),i("div",{staticClass:"bar-filler",style:{width:e.progress_fill+"%"}})]),i("input",{staticClass:"img-uploader",attrs:{type:"file",name:"img",accept:"image/*"},on:{change:function(t){return e.upload_img(t)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.show_done,expression:"show_done"}],staticClass:"done-button",on:{click:function(t){return e.close_img()}}},[e._v("Done")])])]),e._m(3),i("img",{staticClass:"profile-img",attrs:{src:e.logged.photoURL?e.logged.photoURL:n("1771")("./"+e.default_img),alt:"Profile img",draggable:"false"},on:{click:function(t){e.change_img=!0}}}),i("button",{directives:[{name:"show",rawName:"v-show",value:!e.email_button,expression:"!email_button"}],staticClass:"dash-logout",on:{click:function(t){return e.send_email()}}},[e._v("Verify Email")]),i("br"),i("div",{staticClass:"profile-row"},[i("div",[e._v("Email Verified: ")]),i("div",{class:{green:e.logged.emailVerified,red:!e.logged.emailVerified}},[e._v(" "+e._s(e.logged.emailVerified?"Yes":"No")+" ")])]),i("div",{staticClass:"profile-row"},[i("div",[e._v("Email: ")]),i("div",[e._v(e._s(e.logged.email))])]),i("div",{staticClass:"profile-row"},[i("div",[e._v("Display Name: ")]),i("div",[e._v(e._s(e.logged.displayName))])]),i("div",{staticClass:"profile-row"},[i("div",[e._v("Phone Number: ")]),i("div",[e._v(e._s(e.user_phone))])]),i("div",{staticClass:"profile-row"},[i("div",[e._v("Unique ID: ")]),i("div",[e._v(e._s(e.logged.uid))])]),i("button",{staticClass:"dash-logout",on:{click:function(t){return e.signOut()}}},[e._v("Log Out")]),i("br")],1):e._e()],1)},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("u",[e._v("Profile Setting")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[e._v(" Log into "),n("i",[e._v("Initravel")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"seperator"},[n("div",[e._v("OR")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("u",[e._v("Profile")])])}],r=(n("caad"),n("b0c0"),n("2532"),n("dc59")),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wrap"},[i("div",{staticClass:"back",on:{click:function(t){return e.back()}}},[e._v("↶ Back to Log-In")]),i("img",{attrs:{src:n("cf05"),alt:"logo img"}}),i("div",{staticClass:"title",domProps:{innerHTML:e._s(e.title)}}),i("br"),i("div",{staticClass:"signup-error"},[e._v(e._s(e.error_message))]),i("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.register_user()}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.new_email,expression:"new_email"}],attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:e.new_email},on:{input:[function(t){t.target.composing||(e.new_email=t.target.value)},function(t){return e.enable()}],keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.new_pw,expression:"new_pw"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.new_pw},on:{input:[function(t){t.target.composing||(e.new_pw=t.target.value)},function(t){return e.enable()}],keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.new_pw_match,expression:"new_pw_match"}],attrs:{type:"password",placeholder:"Re-type Password",required:""},domProps:{value:e.new_pw_match},on:{input:[function(t){t.target.composing||(e.new_pw_match=t.target.value)},function(t){return e.enable()}],keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:e.display_id,expression:"display_id"}],attrs:{type:"text",placeholder:"Display ID"},domProps:{value:e.display_id},on:{input:function(t){t.target.composing||(e.display_id=t.target.value)}}}),i("div",{staticClass:"row-view"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.first_name,expression:"first_name"}],attrs:{type:"text",placeholder:"First Name"},domProps:{value:e.first_name},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},input:function(t){t.target.composing||(e.first_name=t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.last_name,expression:"last_name"}],attrs:{type:"text",placeholder:"Last Name"},domProps:{value:e.last_name},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},input:function(t){t.target.composing||(e.last_name=t.target.value)}}})]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.phone_number,expression:"phone_number"}],attrs:{type:"tel",placeholder:"Phone"},domProps:{value:e.phone_number},on:{input:function(t){t.target.composing||(e.phone_number=t.target.value)}}}),i("button",{staticClass:"sbutton",attrs:{disabled:""}},[e._v("Submit")])])])},u=[],c=n("59ca"),d={name:"signupComp",data:function(){return{title:"Sign Up For <i>Initravel</i>",new_email:"",new_pw:"",new_pw_match:"",display_id:"",first_name:"",last_name:"",phone_number:null,empty_counter:[],logged:null,error_message:""}},methods:{register_user:r["b"],back:function(){this.$emit("back-button")},enable:function(){var e=document.querySelector(".sbutton"),t=document.querySelectorAll("[required]");this.empty_counter=[];for(var n=0;n<t.length;n++)t[n].value&&this.empty_counter.push("1");this.empty_counter.length===t.length?e.disabled=!1:e.disabled=!0}},created:function(){var e=this;!c.apps.length&&c.initializeApp,c.auth().onAuthStateChanged((function(t){t?(e.logged=t,e.$emit("logged-in",t)):(e.logged=null,e.$emit("logged-in",null))}))}},p=d,g=(n("7286"),n("2877")),m=Object(g["a"])(p,l,u,!1,null,"000b1cc0",null),_=m.exports,f=n("59ca"),v={name:"loginComp",components:{"signup-comp":_},data:function(){return{show_which:1,username:"",password:"",toggle_disable:!0,logged:null,message:"",display_name:"",user_email:"",user_phone:null,email_button:!0,default_img:"missing_img.png",activate_buttons:!1,setting_name:"",setting_phone:null,open_setting:!1,progress_fill:0,change_img:!1,show_done:!1,uploading_file:null,file_name:""}},methods:{signOut:r["c"],close_img:function(){this.change_img=!1,this.uploading_file=null},upload_img:function(e){var t=this,n=e.target.files[0];this.uploading_file=e.target.files[0];var i=f.storage().ref().child("user-list/"+this.logged.uid+"/img/"+n.name);i.put(n).then((function(e){e.ref.getDownloadURL().then((function(e){f.auth().currentUser.photoURL=e,console.log(e),localStorage.setItem("profile_img",n.name)}))})),i.put(n).on("state_changed",(function(e){t.progress_fill=e.bytesTransferred/e.totalBytes*100}))},send_email:function(){f.auth().currentUser.sendEmailVerification().then((function(){alert("Email sent")}))},update_info:function(){var e=this;f.auth().currentUser.updateProfile({displayName:this.setting_name}).then((function(){f.firestore().collection("user-list").doc(e.logged.uid).set({phone:e.setting_phone}).then((function(){f.firestore().collection("user-list").doc(e.logged.uid).get().then((function(t){e.user_phone=t.data().phone}))}))})).then((function(){alert("Update successful."),e.open_setting=!1,e.setting_name="",e.setting_phone=null}))},close_setting:function(){this.open_setting=!1,this.setting_name="",this.setting_phone=null},third_provider:function(e){var t,n=this,i=e.target.innerHTML;i.includes("Google")?t=new f.auth.GoogleAuthProvider:i.includes("Facebook")?t=new f.auth.FacebookAuthProvider:i.includes("Twitter")&&(this.message="Currently unavailable. Please try again with Google or Facebook login."),f.auth().signInWithPopup(t).then((function(e){n.display_name=e.displayName,n.user_email=e.email})).catch((function(e){n.message=e}))},login:function(){var e=this;this.toggle_disable||f.auth().signInWithEmailAndPassword(this.username,this.password).catch((function(t){e.message=t}))},allow_submit:function(){this.username&&this.password?this.toggle_disable=!1:this.toggle_disable=!0},loggedin_func:function(e){this.logged=e,e&&(this.show_which=3)}},watch:{progress_fill:function(){100===this.progress_fill?this.show_done=!0:this.show_done=!1}},created:function(){var e=this;f.auth().onAuthStateChanged((function(t){if(t&&(e.show_which=2,t.emailVerified?e.email_button=!0:e.email_button=!1,f.firestore().collection("user-list").doc(t.uid).get().then((function(t){e.user_phone=t.data().phone}))),localStorage.profile_img){console.log(localStorage.profile_img);var n=f.storage().ref().child("user-list/"+t.uid+"/img/"+localStorage.profile_img);t.photoURL=n,console.log("asdfas"+n)}}))}},h=v,w=(n("f0d9"),Object(g["a"])(h,o,s,!1,null,"0c774ae2",null)),b=w.exports,y={name:"LoginComp",components:{"login-comp":b}},k=y,C=Object(g["a"])(k,i,a,!1,null,null,null);t["default"]=C.exports},ab13:function(e,t,n){var i=n("b622"),a=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(i){}}return!1}},ae40:function(e,t,n){var i=n("83ab"),a=n("d039"),o=n("5135"),s=Object.defineProperty,r={},l=function(e){throw e};e.exports=function(e,t){if(o(r,e))return r[e];t||(t={});var n=[][e],u=!!o(t,"ACCESSORS")&&t.ACCESSORS,c=o(t,0)?t[0]:l,d=o(t,1)?t[1]:void 0;return r[e]=!!n&&!a((function(){if(u&&!i)return!0;var e={length:-1};u?s(e,1,{enumerable:!0,get:l}):e[1]=1,n.call(e,c,d)}))}},caad:function(e,t,n){"use strict";var i=n("23e7"),a=n("4d64").includes,o=n("44d2"),s=n("ae40"),r=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!r},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},f0d9:function(e,t,n){"use strict";var i=n("f0f7"),a=n.n(i);a.a},f0f7:function(e,t,n){}}]);
//# sourceMappingURL=login.e4ed0635.js.map